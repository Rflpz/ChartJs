
<html>
<head>
	<title></title>
	<script src="jquery.js"></script>
	<script src="Chart.js"></script>
</head>
<body>
<canvas id="month" height="450" width="600"></canvas>
<canvas id="day" height="450" width="600"></canvas>
<canvas id="dayMonth" height="450" width="600"></canvas>
<canvas id="id" height="450" width="600"></canvas>
<canvas id="dateBetween" height="450" width="600"></canvas>
<div id="results">
	
</div>
<script type="text/javascript">
			//Pruebas
			month(2014,4);
			day(2);
			dayMonth(2014,2,3);
			id(2)
			dateBetween(2014,01,1,1,23,43,2014,1,2,1,23,43);
			hourBetween(3,4);

function month(year,day){	
	var apiURL = "http://mighty-gorge-2413.herokuapp.com/sensor_data/year/"+year+"/month/"+day
	console.log(apiURL);
			var sensorOne = new Array();
			var sensorTwo = new Array();
			var sensorThree = new Array();
			var days = new Array();
			var indexDay = 1;
			$.getJSON( "month.json", function(data) {
				$.each(data.sensordata.days, function(index, val) {
					sensorOne[index] = parseFloat(val.sensorValues[0]/4.8);
					sensorTwo[index] = parseFloat(val.sensorValues[1]/4.8);
					sensorThree[index] = parseFloat(val.sensorValues[2]/4.8);
					days[index] = indexDay.toString();
					indexDay++;

				});
			})
			  .done(function() { 
				var data = {
				labels : days,
				datasets : [
					{
						fillColor : "rgba(45,62,80,0.5)",
						strokeColor : "rgba(220,220,220,1)",
						pointColor : "rgba(220,220,220,1)",
						pointStrokeColor : "#fff",
						data : sensorOne
					},
					{
						fillColor : "rgba(27,188,55,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,205,1)",
						pointStrokeColor : "#fff",
						data : sensorTwo
					},
					{
						fillColor : "rgba(217,112,65,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,155,1)",
						pointStrokeColor : "#fff",
						data : sensorThree
					}
				]
			}
			var myLine = new Chart(document.getElementById("month").getContext("2d")).Line(data);	


			  })
			  .fail(function() {

			  })
			  .always(function() {

			  });
}
function day(day){	
	var apiURL = "http://mighty-gorge-2413.herokuapp.com/sensor_data/day/"+day
	console.log(apiURL);
			var sensorOne = new Array();
			var sensorTwo = new Array();
			var sensorThree = new Array();
			var hour = new Array();
			$.getJSON( "day.json", function(data) {
				$.each(data.sensordata.hours, function(index, val) {
					sensorOne[index] = parseFloat(val.sensorValues[0]/4.8);
					sensorTwo[index] = parseFloat(val.sensorValues[1]/4.8);
					sensorThree[index] = parseFloat(val.sensorValues[2]/4.8);
					hour[index] = index.toString();
				});
			})
			  .done(function() { 
				var data = {
				labels : hour,
				datasets : [
					{
						fillColor : "rgba(45,62,80,0.5)",
						strokeColor : "rgba(220,220,220,1)",
						pointColor : "rgba(220,220,220,1)",
						pointStrokeColor : "#fff",
						data : sensorOne
					},
					{
						fillColor : "rgba(27,188,55,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,205,1)",
						pointStrokeColor : "#fff",
						data : sensorTwo
					},
					{
						fillColor : "rgba(217,112,65,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,155,1)",
						pointStrokeColor : "#fff",
						data : sensorThree
					}
				]
			}
			var myLine = new Chart(document.getElementById("day").getContext("2d")).Line(data);	


			  })
			  .fail(function() {

			  })
			  .always(function() {

			  });
}
function dayMonth(year,month,day){	
	var apiURL = "http://mighty-gorge-2413.herokuapp.com/sensor_data/year/"+year+"/month/"+month+"/day/"+day
	console.log(apiURL);
			var sensorOne = new Array();
			var sensorTwo = new Array();
			var sensorThree = new Array();
			var hour = new Array();
			$.getJSON( "dayMonth.json", function(data) {
				$.each(data.sensordata.hours, function(index, val) {
					sensorOne[index] = parseFloat(val.sensorValues[0]/4.8);
					sensorTwo[index] = parseFloat(val.sensorValues[1]/4.8);
					sensorThree[index] = parseFloat(val.sensorValues[2]/4.8);
					hour[index] = index.toString();
				});
			})
			  .done(function() { 
				var data = {
				labels : hour,
				datasets : [
					{
						fillColor : "rgba(45,62,80,0.5)",
						strokeColor : "rgba(220,220,220,1)",
						pointColor : "rgba(220,220,220,1)",
						pointStrokeColor : "#fff",
						data : sensorOne
					},
					{
						fillColor : "rgba(27,188,55,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,205,1)",
						pointStrokeColor : "#fff",
						data : sensorTwo
					},
					{
						fillColor : "rgba(217,112,65,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,155,1)",
						pointStrokeColor : "#fff",
						data : sensorThree
					}
				]
			}
			var myLine = new Chart(document.getElementById("dayMonth").getContext("2d")).Line(data);	


			  })
			  .fail(function() {

			  })
			  .always(function() {

			  });
}
function id(id)
{
	var apiURL = "http://mighty-gorge-2413.herokuapp.com/sensor_data/"+id;
	console.log(apiURL);
			var sensorOne;
			var sensorTwo;
			var sensorThree;;
			$.getJSON( "id.json", function(data) {
					sensorOne = parseFloat(data.sensorValues[0]/4.8);
					sensorTwo = parseFloat(data.sensorValues[1]/4.8);
					sensorThree = parseFloat(data.sensorValues[2]/4.8);
			})
			  .done(function() { 
				var data = [
					{
						value: sensorOne,
						color:"#F38630"
					},
					{
						value : sensorTwo,
						color : "#E0E4CC"
					},
					{
						value : sensorThree,
						color : "#69D2E7"
					}	
							
							
				]
				new Chart(document.getElementById("id").getContext("2d")).Pie(data);

			  })
			  .fail(function() {

			  })
			  .always(function() {

			  });	
}
function dateBetween(year,month,day,hour,minute,second,_year,_month,_day,_hour,_minute,_second){	
	var fromDate = year.toString()+"-"+month.toString()+"-"+day.toString()+"-"+hour.toString()+"-"+minute.toString()+"-"+second.toString();
	var toDate = _year.toString()+"-"+_month.toString()+"-"+_day.toString()+"-"+_hour.toString()+"-"+_minute.toString()+"-"+_second.toString();
	var apiURL = "http://mighty-gorge-2413.herokuapp.com/sensor_data/from_date/"+fromDate+"/to_date/"+toDate;
	console.log(apiURL);
			var sensorOne = new Array();
			var sensorTwo = new Array();
			var sensorThree = new Array();
			var date = new Array();
			var pointerTemporal = 0;
			var lastSaved;
			$.getJSON( "dateBetween.json", function(data) {
				$.each(data.sensordata, function(index, val) {
					sensorOne[index] = parseFloat(val.sensorValues[0]/4.8);
					sensorTwo[index] = parseFloat(val.sensorValues[1]/4.8);
					sensorThree[index] = parseFloat(val.sensorValues[2]/4.8);
					var temporalDate = (val.date).toString();
					temporalDate = temporalDate.split("T");
					if(temporalDate[0] != lastSaved)
					{
						date[pointerTemporal] = temporalDate[0].toString();
						lastSaved = temporalDate[0].toString();
						pointerTemporal++;
					}
				});
			})
			  .done(function() { 
				var data = {
				labels : date,
				datasets : [
					{
						fillColor : "rgba(45,62,80,0.5)",
						strokeColor : "rgba(220,220,220,1)",
						pointColor : "rgba(220,220,220,1)",
						pointStrokeColor : "#fff",
						data : sensorOne
					},
					{
						fillColor : "rgba(27,188,55,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,205,1)",
						pointStrokeColor : "#fff",
						data : sensorTwo
					},
					{
						fillColor : "rgba(217,112,65,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,155,1)",
						pointStrokeColor : "#fff",
						data : sensorThree
					}
				]
			}
			var myLine = new Chart(document.getElementById("dateBetween").getContext("2d")).Line(data);	


			  })
			  .fail(function() {

			  })
			  .always(function() {

			  });
}
function hourBetween(hour,_hour){	
	var apiURL = "http://mighty-gorge-2413.herokuapp.com/sensor_data/from_hour/"+hour.toString()+"/to_hour/"+_hour.toString();
	console.log(apiURL);
			var sensorOne = new Array();
			var sensorTwo = new Array();
			var sensorThree = new Array();
			var hour = new Array();
			var pointerTemporal = 0;
			var lastSaved;
			var temporalDate;
			$.getJSON( "dateBetween.json", function(data) {
				$.each(data.sensordata, function(index, val) {
					sensorOne[index] = parseFloat(val.sensorValues[0]/4.8);
					sensorTwo[index] = parseFloat(val.sensorValues[1]/4.8);
					sensorThree[index] = parseFloat(val.sensorValues[2]/4.8);
					var termporalHour = (val.date).toString();
					termporalHour = termporalHour.split("T");
					var tempHour = termporalHour[1];
					tempHour = tempHour.split(":");
					if(tempHour[0] != lastSaved)
					{
						hour[pointerTemporal] = tempHour[0].toString();
						lastSaved = tempHour[0].toString();
						pointerTemporal++;
					}
				});
			})
			  .done(function() { 
				var data = {
				labels : hour,
				datasets : [
					{
						fillColor : "rgba(45,62,80,0.5)",
						strokeColor : "rgba(220,220,220,1)",
						pointColor : "rgba(220,220,220,1)",
						pointStrokeColor : "#fff",
						data : sensorOne
					},
					{
						fillColor : "rgba(27,188,55,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,205,1)",
						pointStrokeColor : "#fff",
						data : sensorTwo
					},
					{
						fillColor : "rgba(217,112,65,0.5)",
						strokeColor : "rgba(151,187,205,1)",
						pointColor : "rgba(151,187,155,1)",
						pointStrokeColor : "#fff",
						data : sensorThree
					}
				]
			}
			var myLine = new Chart(document.getElementById("dateBetween").getContext("2d")).Line(data);	


			  })
			  .fail(function() {

			  })
			  .always(function() {

			  });
}

</script>
</body>
</html>